<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>&ldquo;Private&rdquo; installations of files</title>
<link rel="stylesheet" href="faq.css">
</head>
<body>
<div class="breadcrumbs">
<a href="index.html">FAQ</a> &gt; <a href="index.html#InstallingLaTeXfiles">Installing (La)TeX files</a> &gt; <a href="index.html#Q-privinst">&ldquo;Private&rdquo; installations of files</a>
</div>
<h1>&ldquo;Private&rdquo; installations of files</h1>


<p>

<p>
It sometimes happens that you need a new version of some macro package
or font, but that the machine you use is maintained by someone who&rsquo;s
unwilling to update and won&rsquo;t give you privileges to do the job
yourself.  A <a href="FAQ-tempinst.html">&ldquo;temporary&rdquo; installation</a> is
sometimes the correct approach, but if there&rsquo;s the slightest chance
that the installation will be needed on more than one project,
temporary installations aren&rsquo;t right.

<p>
In circumstances where you have plenty of quota on backed-up media, or
adequate local scratch space, the correct approach is to create a
private installation of (La)TeX which includes the new stuff you
need; this is the ideal, but is not generally possible.

<p>
So, since you can&rsquo;t install into the public <tt>texmf</tt> tree, you
have to install into a <i class="filename">texmf</i> tree of your own; fortunately, the
TDS standard allows for this, and modern distributions allow
you to do it.  The most modern distributions refer to the tree as
<tt>&#x24;TEXMFHOME</tt>, but it used to be called <tt>&#x24;HOMETEXMF</tt>;
so to check that your TeX system does indeed support the mechanism
you should start with
<blockquote>
<pre>
kpsewhich -var-value TEXMFHOME
</pre>
</blockquote>
(for example).  This will almost invariably return a pointer to a
subdirectory <i class="filename">texmf</i> of your home directory; the commonest
exception is Macintoshes, using MacTeX, where the diretory is
conventionally <i class="filename">Library/texmf</i> in your home directory.

<p>
If you can confirm that the technique does indeed work, install your
new package (or whatever) in the <a href="FAQ-install-where.html">correct place</a>
in a tree based on <i class="filename">$HOME/texmf</i>, 
and generate an index of that tree
<blockquote>
<pre>
texhash $HOME/texmf
</pre>
</blockquote>
(the argument specifies which tree you are indexing: it&rsquo;s necessary
since you don&rsquo;t, by hypothesis, have access to the main tree, and
<i class="progname">texhash</i> without the argument would try to write the main
tree.

<p>
There are two wrinkles to this simple formula: first, the installation
you&rsquo;re using may <em>not</em> define a home TEXMF directory, and second,
there may be some obstruction to using <i class="filename">$HOME/texmf</i> 
as the
default name.  In either case, a good solution is to have your own
<i class="filename">texmf.cnf</i>&nbsp;&mdash; an idea that sounds more frightening that it
actually is.  The installation&rsquo;s existing file may be located with the
command:
<blockquote>
<pre>
kpsewhich texmf.cnf
</pre>
</blockquote>
Take a copy of the file and put it into a directory of your own; this
could be any directory, but an obvious choice is the <i class="filename">web2c</i>
directory of the tree you want to create, i.e.,
<i class="filename">$HOME/texmf/web2c</i> 
or the like.  Make an environment variable to
point to this directory:
<blockquote>
<pre>
TEXMFCNF=$HOME/texmf/web2c
export TEXMFCNF
</pre>
</blockquote>
(for a Bourne shell style system), or
<blockquote>
<pre>
setenv TEXMFCNF $HOME/texmf/web2c
</pre>
</blockquote>
(for a C-shell style system).  Now edit the copy of <i class="filename">texmf.cnf</i>

<p>
There will be a line in the existing file that defines the tree where
everything searches; the simplest form of the line is:
<blockquote>
<pre>
TEXMF = !!$TEXMFMAIN
</pre>
</blockquote>
but, there are likely to be several alternative settings behind
comment markers (&ldquo;<tt>&#x25;</tt>&rdquo;), and the person who 
installed your system may have left them there.  Whatever, you need to
modify the line that&rsquo;s in effect: change the above to three lines:
<blockquote>
<pre>
HOMETEXMF = $HOME/texmf
TEXMF = {$HOMETEXMF,!!$TEXMFMAIN}
% TEXMF = !!$TEXMFMAIN
</pre>
</blockquote>
the important point being that <tt>&#x24;HOMETEXMF</tt> must come before
whatever was there before, inside the braces.  For example, if the
original was
<blockquote>
<pre>
TEXMF = {!!$LOCALTEXMF,!!$TEXMFMAIN}
</pre>
</blockquote>
it should be converted to:
<blockquote>
<pre>
HOMETEXMF = $HOME/texmf
TEXMF = {$HOMETEXMF,!!$LOCALTEXMF,
                     !!$TEXMFMAIN}
% TEXMF = {!!$LOCALTEXMF,!!$TEXMFMAIN}
</pre>
<pre>
HOMETEXMF = $HOME/texmf
TEXMF = {$HOMETEXMF,!!$LOCALTEXMF,!!$TEXMFMAIN}
% TEXMF = {!!$LOCALTEXMF,!!$TEXMFMAIN}
</pre>
</blockquote>
(retaining the original, as a comment, is merely an aide-memoir in
case you need to make another change, later).  The <tt>!!</tt> signs
tell the file-searching library that it should insist on a
<i class="progname">texhash</i>-ed directory tree; if you can count on yourself
remembering to run <i class="progname">texhash</i> on your new tree every time you
change it, then it&rsquo;s worth adding the marks to your tree:
<blockquote>
<pre>
TEXMF = {!!$HOMETEXMF,!!$LOCALTEXMF,
                       !!$TEXMFMAIN}
</pre>
<pre>
TEXMF = {!!$HOMETEXMF,!!$LOCALTEXMF,!!$TEXMFMAIN}
</pre>
</blockquote>
as this will make (La)TeX find its files marginally faster.

<p>
Having made all these changes, (La)TeX should &ldquo;just use&rdquo; files in
your new tree, in preference to anything in the main tree&nbsp;&mdash; you can
use it for updates to packages in the main tree, as well as for
installing new versions of things.

<p class="lastedit">This answer last edited: 2011-04-13</p>

<p>

<hr><p class="faqlink">This question on the Web: <a href="http://www.tex.ac.uk/cgi-bin/texfaq2html?label=privinst">http://www.tex.ac.uk/cgi-bin/texfaq2html?label=privinst</a></p>
